spring:
  # Database properties will be set by TestContainers via @DynamicPropertySource
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.PostgreSQLDialect

  flyway:
    enabled: false

  # Kafka properties will be set by TestContainers via @DynamicPropertySource

  # Disable auto-configurations for tests
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration
      - org.springframework.boot.autoconfigure.security.oauth2.resourceserver.OAuth2ResourceServerAutoConfiguration

  # Exclude Kafka consumer from component scanning
  main:
    lazy-initialization: true

  security:
    oauth2:
      resourceserver:
        jwt:
          jwk-set-uri: https://login.microsoftonline.com/your-tenant-id/discovery/v2.0/keys

logging:
  level:
    no.fdk.harvestadmin: DEBUG
    org.springframework.kafka: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

app:
  kafka:
    topic:
      harvest-events: harvest-events
  security:
    token-audience: fdk-harvest-admin
    sys-admin-auth: system:root:admin
    org-type: organization
    admin-permission: admin
    write-permission: write
    api-key: test-api-key
    keycloak-host: https://auth.test.fellesdatakatalog.digdir.no



